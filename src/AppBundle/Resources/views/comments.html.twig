{% extends '@RadditApp/forum-base.html.twig' %}

{% from '@RadditApp/macros/submissions.html.twig' import submission %}
{% from '@RadditApp/macros/comments.html.twig' import comment %}

{% block page_classes %}
  {{- parent() }}
  comments-page
{% endblock %}

{% block body %}
  {{ submission(submission, {show_body: true}) }}

  <h2>{{ 'comments.comments'|trans }}</h2>

  {% if is_granted('ROLE_USER') %}
    {{ render(controller('RadditAppBundle:Comment:commentForm', {
      forumName: forum.name,
      submissionId: submission.id,
    })) }}
  {% endif %}

  <div class="submission-comments">
    {% for comment in submission.topLevelComments %}
      {{ comment(comment) }}
    {% endfor %}
  </div>
{% endblock %}
