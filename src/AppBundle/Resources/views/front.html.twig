{% extends '@RadditApp/base.html.twig' %}
{% from '@RadditApp/macros/submissions.html.twig' import submission, submission_sort %}

{% block page_classes %}
  front-page
{% endblock %}

{% block body %}
  {{ submission_sort(sort_by) }}

  {% for submission in submissions %}
    {{ submission(submission) }}
  {% endfor %}

  {% include '@RadditApp/includes/pagination.html.twig' with {pager: submissions} %}
{% endblock %}

{%- block sidebar -%}
  <section>
    {% if is_granted('ROLE_USER') %}
      <h1>{{ 'front.subscribed_forums'|trans }}</h1>
    {% else %}
      <h1>{{ 'front.featured_forums'|trans }}</h1>
    {% endif %}

    {% if forums|length > 0 %}
      <ul>
        {% for name in forums %}
          <li><a href="{{ path('raddit_app_forum', {forum_name: name}) }}">{{ name }}</a></li>
        {% endfor %}
      </ul>
    {% elseif is_granted('ROLE_USER') %}
      <p>{{ 'front.no_subscriptions'|trans }}</p>
    {% else %}
      <p>{{ 'front.no_forums'|trans }}</p>
    {% endif %}
  </section>
{%- endblock -%}
